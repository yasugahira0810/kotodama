# ログインユースケース

## 基本コース

- ユーザはログイン画面にアクセスする。ユーザはアカウント名とパスワードを入力して、「ログイン」ボタンをクリックする。
- システムはユーザ認証する。アカウント名とパスワードが正しければ、名言一覧画面に遷移する。

## 代替コース

### ユーザが存在しない

- システムはユーザが入力したアカウント名をDBで検索し、一致するアカウント名が存在しなかった場合は、「ユーザが存在しません」とエラーメッセージを表示する。

### パスワードが誤っている

- システムは、ユーザが入力したアカウントが存在した場合はパスワードを照合する。パスワードが誤っていた場合は、「パスワードが違います」とエラーメッセージを表示する。

---

# 名言一覧表示ユースケース

## 基本コース

- ユーザは名言一覧画面にアクセスする。
- システムはDBから名言情報と書籍情報を取得して名言一覧画面を表示する。

## 代替コース

### DB情報取得失敗

- ユーザは名言一覧画面にアクセスする。
- システムはDBから名言情報と書籍情報を取得できなかった場合、「名言一覧を取得できませんでした。管理者にお問い合わせください。」のメッセージつきで名言一覧画面を表示する。

---

# 名言登録ユースケース

## 基本コース（名言登録成功）

- ユーザは名言一覧画面で名言と名言の記載された書籍を入力する。
- システムはブラウザ上で名言と書籍名の文字数を算出する。文字数が3文字（名言1文字＋空白＋書籍名１文字）以上400文字以下なら、「登録」ボタンを活性化する。
- ユーザは「登録」ボタンをクリックする。
- システムは名言と書籍名をDBに登録して「名言を登録しました」とメッセージを出力して名言一覧画面に遷移する。

## 代替コース

### 文字数バリデーションエラー

- ユーザは名言一覧画面で名言と名言の記載された書籍を入力する。
- システムはブラウザ上で名言と書籍名の文字数を算出する。文字数が3文字（名言1文字＋空白＋書籍名１文字）未満または400文字以上なら、「登録」ボタンを非活性にする。

### 名言登録失敗

- ユーザは名言一覧画面で名言と名言の記載された書籍を入力する。
- システムはブラウザ上で名言と書籍名の文字数を算出する。文字数が3文字（名言1文字＋空白＋書籍名１文字）以上400文字以下なら、「登録」ボタンを活性化する。
- ユーザは「登録」ボタンをクリックする。
- DB障害などの理由でシステムが名言と書籍名をDBに登録できない場合、名言と書籍名の入力欄には入力内容を残した上で、「名言を登録できませんでした」とメッセージを出力して名言一覧画面に遷移する。

### 重複エラー

- ユーザは名言一覧画面で名言と名言の記載された書籍を入力する。
- システムはブラウザ上で名言と書籍名の文字数を算出する。文字数が3文字（名言1文字＋空白＋書籍名１文字）以上139文字以下なら、「登録」ボタンを活性化する。
- ユーザは「登録」ボタンをクリックする。
- 名言と書籍名を結合した文字列が既に登録済みだった場合、「名言は登録済みです」とメッセージを出力して名言一覧画面に遷移する。

---

# 名言削除ユースケース

## 基本コース（名言削除成功）

- ユーザは名言一覧画面で、削除対象の名言の「×」ボタンをクリックする。
- システムは「削除してよろしいですか？　はい　いいえ」というポップアップを表示する。
- ユーザが「はい」をクリックした場合、システムは削除対象の名言を削除して、「削除しました」のメッセージを出力して名言一覧画面に遷移する。
- ユーザが「いいえ」をクリックした場合、システムはポップアップを閉じて名言一覧画面に遷移する。

## 代替コース

### 名言削除失敗

- ユーザは名言一覧画面で、削除対象の名言の「×」ボタンをクリックする。
- システムは「削除してよろしいですか？　はい　いいえ」というポップアップを表示する。
- ユーザが「はい」をクリックして、システムが削除対象の名言を削除を実行して失敗した場合、「削除に失敗しました」のメッセージを出力して名言一覧画面に遷移する。

---

# 名言ツイートユースケース

## 基本コース

- システムは毎朝08:00にDBから名言を１つ抽出する。
- システムは名言＋全角スペース＋書籍名の文字数を算出する。
- システムは名言＋全角スペース＋書籍名の文字数が3文字以上140文字以下ならTwitter APIを1回実行する。
- システムは名言＋全角スペース＋書籍名の文字数が141文字以上274文字以下ならTwitter APIを2回実行する。
- システムは名言＋全角スペース＋書籍名の文字数が275文字以上400文字以下ならTwitter APIを3回実行する。

## 代替コース

- システムは毎朝08:00にDBから名言を１つ抽出する処理に失敗した場合、失敗した旨をログに残して終了する。
- システムは毎朝08:00にDBから名言を１つ抽出して、Twitter APIの実行に失敗した場合、失敗した旨をログに出力して終了する。
- (ツイートがされなかったら、ユーザが気付くはずなので、リカバリ処理などは実施しない。)